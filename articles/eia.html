<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="eia">
<title>Package overview • eia</title>
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="/apple-touch-icon.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://docs.ropensci.org/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Package overview">
<meta property="og:description" content="eia">
<meta property="og:image" content="https://docs.ropensci.org/eia/logo.png">
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Matomo --><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.css">
<script src="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.js" data-cfasync="false"></script><script src="https://ropensci.org/scripts/matomo.js"></script><noscript><p><img src="https://ropensci.matomo.cloud/matomo.php?idsite=1&amp;rec=1" style="border:0;" alt=""></p></noscript>
<!-- End Matomo Code -->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    <a href="https://ropensci.org" class="external-link"><img src="https://ropensci.org/img/icon_short_white.svg" id="hexlogo" alt="rOpenSci"></a>
    <a class="navbar-brand me-2" href="../index.html">eia</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.4.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../index.html">
    <span class="fa fa-home"></span>
     
    Home
  </a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../articles/eia.html">Get Started</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/api.html">API details</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/ropensci/eia">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Package overview</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/ropensci/eia/blob/HEAD/vignettes/eia.Rmd" class="external-link"><code>vignettes/eia.Rmd</code></a></small>
      <div class="d-none name"><code>eia.Rmd</code></div>
    </div>

    
    
<p>This vignette provides a brief overview of the most important functions in <code>eia</code>. Other vignettes go into greater depth on specific topics and API endpoints.</p>
<div class="section level2">
<h2 id="api-key">API key<a class="anchor" aria-label="anchor" href="#api-key"></a>
</h2>
<div class="section level3">
<h3 id="register-a-key-with-eia">Register a key with EIA<a class="anchor" aria-label="anchor" href="#register-a-key-with-eia"></a>
</h3>
<p>Obtaining an API key is easy, and free!</p>
<p>Pulling data from the US Energy Information Administration (EIA) API requires a registered API key. A key can be obtained at no cost <a href="https://www.eia.gov/opendata/register.php" class="external-link">here</a>. A valid email and agreement to the API Terms of Service is required to obtain a key.</p>
<p>It is important to store the API key somewhere secure. Do not commit it to a repository or otherwise share it. For example, one option is to store it in the <code>.Renviron</code> file.</p>
</div>
<div class="section level3">
<h3 id="key-storage-and-retrieval">Key storage and retrieval<a class="anchor" aria-label="anchor" href="#key-storage-and-retrieval"></a>
</h3>
<p>While the <code>key</code> argument can be provided to every API function call, it is not necessary. There are “get” and “set” helpers available to make using <code>eia</code> functions a more seamless experience.</p>
<p><code><a href="../reference/eia_key.html">eia_set_key()</a></code> provides the option of storing the key for the duration of the R session.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://docs.ropensci.org/eia/">eia</a></span><span class="op">)</span></span>
<span><span class="co"># eia_set_key("yourkey")</span></span>
<span><span class="co"># eia_get_key() # retrieve it</span></span></code></pre></div>
<p>If the key already exists in the system environment and the plan is to pass <code>key</code> to functions explicitly, then start as follows.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">key</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"EIA_KEY"</span><span class="op">)</span></span>
<span><span class="co"># or:</span></span>
<span><span class="va">key</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/eia_key.html">eia_get_key</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>In general, however, if the key is set globally - such as in <code>.Renviron</code> - then no further action regarding the key is required when using the package. See the vignette on API details for more information about all the available options for key storage.</p>
</div>
</div>
<div class="section level2">
<h2 id="eia-directory">EIA directory<a class="anchor" aria-label="anchor" href="#eia-directory"></a>
</h2>
<p>Once the fully registered EIA API key is obtained and properly stored in the active R session, by whichever method preferred, the ability to explore the API directory (folder structure) and obtain the data within is set.</p>
<p>Note, the EIA’s APIv2 has been redesigned to be more human-readable friendly; and, rather than rely on numeric ID values, it is now built around a self-searchable folder structure where the ID values are now just natural language, i.e. words.</p>
<p>Here is the top-level directory information:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/eia_dir.html">eia_dir</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 14 × 3</span></span>
<span><span class="co">#&gt;    id                name                            description                                                                        </span></span>
<span><span class="co">#&gt;    &lt;chr&gt;             &lt;chr&gt;                           &lt;chr&gt;                                                                              </span></span>
<span><span class="co">#&gt;  1 coal              Coal                            EIA coal energy data                                                               </span></span>
<span><span class="co">#&gt;  2 crude-oil-imports Crude Oil Imports               Crude oil imports by country to destination, includes type, grade, quantity.  Sour…</span></span>
<span><span class="co">#&gt;  3 electricity       Electricity                     EIA electricity survey data                                                        </span></span>
<span><span class="co">#&gt;  4 international     International                   Country level production, consumption, imports, exports by energy source (petroleu…</span></span>
<span><span class="co">#&gt;  5 natural-gas       Natural Gas                     EIA natural gas survey data                                                        </span></span>
<span><span class="co">#&gt;  6 nuclear-outages   Nuclear Outages                 EIA nuclear outages survey data                                                    </span></span>
<span><span class="co">#&gt;  7 petroleum         Petroleum                       EIA petroleum gas survey data                                                      </span></span>
<span><span class="co">#&gt;  8 seds              State Energy Data System (SEDS) Estimated production, consumption, price, and expenditure data for all energy sour…</span></span>
<span><span class="co">#&gt;  9 steo              Short Term Energy Outlook       Monthly short term (18 month) projections using STEO model.  Report and interactiv…</span></span>
<span><span class="co">#&gt; 10 densified-biomass Densified Biomass               EIA densified biomass data                                                         </span></span>
<span><span class="co">#&gt; 11 total-energy      Total Energy                    These data represent the most recent comprehensive energy statistics integrated ac…</span></span>
<span><span class="co">#&gt; 12 aeo               Annual Energy Outlook           Annual U.S. projections using National Energy Modelling System (NEMS) for release …</span></span>
<span><span class="co">#&gt; 13 ieo               International Energy Outlook    Annual international projections using the World Energy Projection System (WEPS) m…</span></span>
<span><span class="co">#&gt; 14 co2-emissions     State CO2 Emissions             EIA CO2 Emissions data</span></span></code></pre></div>
<p>Navigate deeper into this directory by supplying a folder id (e.g. id = “electricity”).</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/eia_dir.html">eia_dir</a></span><span class="op">(</span><span class="st">"electricity"</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 6 × 3</span></span>
<span><span class="co">#&gt;   id                              name                                                                       description                </span></span>
<span><span class="co">#&gt;   &lt;chr&gt;                           &lt;chr&gt;                                                                      &lt;chr&gt;                      </span></span>
<span><span class="co">#&gt; 1 retail-sales                    Electricity Sales to Ultimate Customers                                    "Electricity sales to ulti…</span></span>
<span><span class="co">#&gt; 2 electric-power-operational-data Electric Power Operations (Annual and Monthly)                             "Monthly and annual electr…</span></span>
<span><span class="co">#&gt; 3 rto                             Electric Power Operations (Daily and Hourly)                               "Hourly and daily electric…</span></span>
<span><span class="co">#&gt; 4 state-electricity-profiles      State Specific Data                                                        "State Specific Data"      </span></span>
<span><span class="co">#&gt; 5 operating-generator-capacity    Inventory of Operable Generators                                           "Inventory of operable gen…</span></span>
<span><span class="co">#&gt; 6 facility-fuel                   Electric Power Operations for Individual Power Plants (Annual and Monthly) "Annual and monthly electr…</span></span></code></pre></div>
<p>And, because APIv2 is a directory listing, to go any deeper simply requires appending the next id (folder name) separated by <code>"/"</code>, where the first folder ID in from the top-level directory is “electricity” and the next deeper folder ID from there is “retail-sales”. As a result, supply “electricity/retail-sales” to the first argument in <code><a href="../reference/eia_dir.html">eia_dir()</a></code>, as shown below, to see the next next layer in.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/eia_dir.html">eia_dir</a></span><span class="op">(</span><span class="st">"electricity/retail-sales"</span><span class="op">)</span></span></code></pre></div>
<p>Finally, the end of the directory path has been reached, as shown by the message provided in the console output above; i.e. there are no more sub-folders to explore. This message is prompting to explore the available data at the end of this directory path with <code><a href="../reference/eia_metadata.html">eia_metadata()</a></code>.</p>
<div class="section level3">
<h3 id="note-on-output-format">Note on output format<a class="anchor" aria-label="anchor" href="#note-on-output-format"></a>
</h3>
<p>The default is to return tidy data in a tibble data frame. For <code><a href="../reference/eia_dir.html">eia_dir()</a></code>, set <code>tidy = FALSE</code> to return a list as returned by <code><a href="https://rdrr.io/pkg/jsonlite/man/fromJSON.html" class="external-link">jsonlite::fromJSON</a></code>. Additionally, set <code>tidy = NA</code> to return a raw character string of the JSON payload.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/eia_dir.html">eia_dir</a></span><span class="op">(</span>tidy <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="co">#&gt; $response</span></span>
<span><span class="co">#&gt; $response$id</span></span>
<span><span class="co">#&gt; [1] ""</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $response$name</span></span>
<span><span class="co">#&gt; [1] ""</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $response$description</span></span>
<span><span class="co">#&gt; [1] ""</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $response$routes</span></span>
<span><span class="co">#&gt;                   id                            name</span></span>
<span><span class="co">#&gt; 1               coal                            Coal</span></span>
<span><span class="co">#&gt; 2  crude-oil-imports               Crude Oil Imports</span></span>
<span><span class="co">#&gt; 3        electricity                     Electricity</span></span>
<span><span class="co">#&gt; 4      international                   International</span></span>
<span><span class="co">#&gt; 5        natural-gas                     Natural Gas</span></span>
<span><span class="co">#&gt; 6    nuclear-outages                 Nuclear Outages</span></span>
<span><span class="co">#&gt; 7          petroleum                       Petroleum</span></span>
<span><span class="co">#&gt; 8               seds State Energy Data System (SEDS)</span></span>
<span><span class="co">#&gt; 9               steo       Short Term Energy Outlook</span></span>
<span><span class="co">#&gt; 10 densified-biomass               Densified Biomass</span></span>
<span><span class="co">#&gt; 11      total-energy                    Total Energy</span></span>
<span><span class="co">#&gt; 12               aeo           Annual Energy Outlook</span></span>
<span><span class="co">#&gt; 13               ieo    International Energy Outlook</span></span>
<span><span class="co">#&gt; 14     co2-emissions             State CO2 Emissions</span></span>
<span><span class="co">#&gt;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              description</span></span>
<span><span class="co">#&gt; 1                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   EIA coal energy data</span></span>
<span><span class="co">#&gt; 2                                                                                                                                                                                                                                                                                                          Crude oil imports by country to destination, \r\n        includes type, grade, quantity.  Source: EIA-814  Interactive data \r\n        product:  www.eia.gov/petroleum/imports/companylevel/</span></span>
<span><span class="co">#&gt; 3                                                                                                                                                                                                                                                                                                                                                                                                                                                                            EIA electricity survey data</span></span>
<span><span class="co">#&gt; 4                                                                                                                                                                                                                                                                                        Country level production, consumption, imports, exports by energy source (petroleum, natural gas, electricity, renewable, etc.)  \r\n        Interactive product:  https://www.eia.gov/international/data/world</span></span>
<span><span class="co">#&gt; 5                                                                                                                                                                                                                                                                                                                                                                                                                                                                            EIA natural gas survey data</span></span>
<span><span class="co">#&gt; 6                                                                                                                                                                                                                                                                                                                                                                                                                                                                        EIA nuclear outages survey data</span></span>
<span><span class="co">#&gt; 7                                                                                                                                                                                                                                                                                                                                                                                                                                                                          EIA petroleum gas survey data</span></span>
<span><span class="co">#&gt; 8                                                                                                                                                                                                                                        Estimated production, consumption, price, and expenditure data for all energy sources by state and sector.  \r\n        Source:  https://www.eia.gov/state/seds/seds-technical-notes-complete.php  \r\n        Product:  SEDS (https://www.eia.gov/state/seds/)</span></span>
<span><span class="co">#&gt; 9                                                                                                                                                                                                                                                                                                                                                     Monthly short term (18 month) projections using STEO model.  \r\n        Report and interactive projection data browser:  STEO (www.eia.gov/steo/)</span></span>
<span><span class="co">#&gt; 10                                                                                                                                                                                                                                                                                                                                                                                                                                                                            EIA densified biomass data</span></span>
<span><span class="co">#&gt; 11 These data represent the most recent comprehensive energy statistics integrated across all energy sources.  The data includes total energy production, consumption, stocks, and trade; energy prices; overviews of petroleum, natural gas, coal, electricity, nuclear energy, renewable energy, and carbon dioxide emissions; and data unit conversions values.  Source: https://www.eia.gov/totalenergy/data/monthly/pdf/mer_a_doc.pdf  Report:  MER (https://www.eia.gov/totalenergy/data/monthly/)</span></span>
<span><span class="co">#&gt; 12                                                                                                                                                                                                                                                                                                                      Annual U.S. projections using National Energy Modelling System (NEMS) for release year.  Report, documentation, and interactive projection data browser:  AEO (www.eia.gov/aeo/)</span></span>
<span><span class="co">#&gt; 13                                                                                                                                                                                                                                                                                                                     Annual international projections using the World Energy Projection System (WEPS) model for release year.  Report and interactive projection data browser:  IEO (www.eia.gov/ieo/)</span></span>
<span><span class="co">#&gt; 14                                                                                                                                                                                                                                                                                                                                                                                                                                                                                EIA CO2 Emissions data</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $request</span></span>
<span><span class="co">#&gt; $request$command</span></span>
<span><span class="co">#&gt; [1] "/v2/"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $request$params</span></span>
<span><span class="co">#&gt; $request$params$api_key</span></span>
<span><span class="co">#&gt; [1] "dUlpeaO4fNAmo9nJcgIhtCfBN5VtiZnoZDzuYGuG"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $apiVersion</span></span>
<span><span class="co">#&gt; [1] "2.1.4"</span></span>
<span></span>
<span><span class="fu"><a href="../reference/eia_dir.html">eia_dir</a></span><span class="op">(</span>tidy <span class="op">=</span> <span class="cn">NA</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "{\"response\":{\"id\":\"\",\"name\":\"\",\"description\":\"\",\"routes\":[{\"id\":\"coal\",\"name\":\"Coal\",\"description\":\"EIA coal energy data\"},{\"id\":\"crude-oil-imports\",\"name\":\"Crude Oil Imports\",\"description\":\"Crude oil imports by country to destination, \\r\\n        includes type, grade, quantity.  Source: EIA-814  Interactive data \\r\\n        product:  www.eia.gov\\/petroleum\\/imports\\/companylevel\\/\"},{\"id\":\"electricity\",\"name\":\"Electricity\",\"description\":\"EIA electricity survey data\"},{\"id\":\"international\",\"name\":\"International\",\"description\":\"Country level production, consumption, imports, exports by energy source (petroleum, natural gas, electricity, renewable, etc.)  \\r\\n        Interactive product:  https:\\/\\/www.eia.gov\\/international\\/data\\/world\"},{\"id\":\"natural-gas\",\"name\":\"Natural Gas\",\"description\":\"EIA natural gas survey data\"},{\"id\":\"nuclear-outages\",\"name\":\"Nuclear Outages\",\"description\":\"EIA nuclear outages survey data\"},{\"id\":\"petroleum\",\"name\":\"Petroleum\",\"description\":\"EIA petroleum gas survey data\"},{\"id\":\"seds\",\"name\":\"State Energy Data System (SEDS)\",\"description\":\"Estimated production, consumption, price, and expenditure data for all energy sources by state and sector.  \\r\\n        Source:  https:\\/\\/www.eia.gov\\/state\\/seds\\/seds-technical-notes-complete.php  \\r\\n        Product:  SEDS (https:\\/\\/www.eia.gov\\/state\\/seds\\/)\"},{\"id\":\"steo\",\"name\":\"Short Term Energy Outlook\",\"description\":\"Monthly short term (18 month) projections using STEO model.  \\r\\n        Report and interactive projection data browser:  STEO (www.eia.gov\\/steo\\/)\"},{\"id\":\"densified-biomass\",\"name\":\"Densified Biomass\",\"description\":\"EIA densified biomass data\"},{\"id\":\"total-energy\",\"name\":\"Total Energy\",\"description\":\"These data represent the most recent comprehensive energy statistics integrated across all energy sources.  The data includes total energy production, consumption, stocks, and trade; energy prices; overviews of petroleum, natural gas, coal, electricity, nuclear energy, renewable energy, and carbon dioxide emissions; and data unit conversions values.  Source: https:\\/\\/www.eia.gov\\/totalenergy\\/data\\/monthly\\/pdf\\/mer_a_doc.pdf  Report:  MER (https:\\/\\/www.eia.gov\\/totalenergy\\/data\\/monthly\\/)\"},{\"id\":\"aeo\",\"name\":\"Annual Energy Outlook\",\"description\":\"Annual U.S. projections using National Energy Modelling System (NEMS) for release year.  Report, documentation, and interactive projection data browser:  AEO (www.eia.gov\\/aeo\\/)\"},{\"id\":\"ieo\",\"name\":\"International Energy Outlook\",\"description\":\"Annual international projections using the World Energy Projection System (WEPS) model for release year.  Report and interactive projection data browser:  IEO (www.eia.gov\\/ieo\\/)\"},{\"id\":\"co2-emissions\",\"name\":\"State CO2 Emissions\",\"description\":\"EIA CO2 Emissions data\"}]},\"request\":{\"command\":\"\\/v2\\/\",\"params\":{\"api_key\":\"dUlpeaO4fNAmo9nJcgIhtCfBN5VtiZnoZDzuYGuG\"}},\"apiVersion\":\"2.1.4\"}"</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="eia-metadata">EIA metadata<a class="anchor" aria-label="anchor" href="#eia-metadata"></a>
</h2>
<p>Now back to the example regarding the Retail Sales of Electricity…</p>
<p><code><a href="../reference/eia_metadata.html">eia_metadata()</a></code> provides as the name suggests: metadata on a given set of data provided by a terminal (i.e. final) directory path. This includes the following:</p>
<ul>
<li>Name</li>
<li>Description</li>
<li>Data values (i.e. column names)</li>
<li>Facets (i.e. filter options)
<ul>
<li>e.g. filter on State = “OH” and Sector = “RES” (residential)</li>
</ul>
</li>
<li>Frequencies (i.e. available time denominations)
<ul>
<li>e.g. monthly, quarterly, annual, etc.</li>
</ul>
</li>
<li>Defaults
<ul>
<li>e.g. default date format and frequency</li>
</ul>
</li>
<li>Date range</li>
</ul>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/eia_metadata.html">eia_metadata</a></span><span class="op">(</span><span class="st">"electricity/retail-sales"</span><span class="op">)</span></span>
<span><span class="co">#&gt; $Name</span></span>
<span><span class="co">#&gt; [1] "Electricity Sales to Ultimate Customers"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $Description</span></span>
<span><span class="co">#&gt; [1] "Electricity sales to ultimate customer by state and sector (number of customers, average price, revenue, and megawatthours of sales).  \n    Sources: Forms EIA-826, EIA-861, EIA-861M"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $Data</span></span>
<span><span class="co">#&gt; # A tibble: 4 × 3</span></span>
<span><span class="co">#&gt;   id        alias                                              units                 </span></span>
<span><span class="co">#&gt;   &lt;chr&gt;     &lt;chr&gt;                                              &lt;chr&gt;                 </span></span>
<span><span class="co">#&gt; 1 revenue   Revenue from Sales to Ultimate Customers           million dollars       </span></span>
<span><span class="co">#&gt; 2 sales     Megawatthours Sold to Utlimate Customers           million kilowatthours </span></span>
<span><span class="co">#&gt; 3 price     Average Price of Electricity to Utlimate Customers cents per kilowatthour</span></span>
<span><span class="co">#&gt; 4 customers Number of Ultimate Customers                       number of customers   </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $Facets</span></span>
<span><span class="co">#&gt; # A tibble: 2 × 2</span></span>
<span><span class="co">#&gt;   id       description          </span></span>
<span><span class="co">#&gt;   &lt;chr&gt;    &lt;chr&gt;                </span></span>
<span><span class="co">#&gt; 1 stateid  State / Census Region</span></span>
<span><span class="co">#&gt; 2 sectorid Sector               </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $Frequency</span></span>
<span><span class="co">#&gt; # A tibble: 3 × 4</span></span>
<span><span class="co">#&gt;   id        description                            query format </span></span>
<span><span class="co">#&gt;   &lt;chr&gt;     &lt;chr&gt;                                  &lt;chr&gt; &lt;chr&gt;  </span></span>
<span><span class="co">#&gt; 1 monthly   One data point for each month.         M     YYYY-MM</span></span>
<span><span class="co">#&gt; 2 quarterly One data point every 3 months.         Q     YYYY-QQ</span></span>
<span><span class="co">#&gt; 3 annual    One data point for each calendar year. A     YYYY   </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $Defaults</span></span>
<span><span class="co">#&gt; # A tibble: 1 × 2</span></span>
<span><span class="co">#&gt;   format  frequency</span></span>
<span><span class="co">#&gt;   &lt;chr&gt;   &lt;chr&gt;    </span></span>
<span><span class="co">#&gt; 1 YYYY-MM monthly  </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $Period</span></span>
<span><span class="co">#&gt; # A tibble: 1 × 2</span></span>
<span><span class="co">#&gt;   start   end    </span></span>
<span><span class="co">#&gt;   &lt;chr&gt;   &lt;chr&gt;  </span></span>
<span><span class="co">#&gt; 1 2001-01 2023-08</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="eia-data">EIA data<a class="anchor" aria-label="anchor" href="#eia-data"></a>
</h2>
<div class="section level3">
<h3 id="data-structure">Data structure<a class="anchor" aria-label="anchor" href="#data-structure"></a>
</h3>
<p>The metadata from above can be used to have a better understanding of what data is available and how that data can be pulled from the API using <code><a href="../reference/eia_data.html">eia_data()</a></code>. However, simply supplying the above directory path from above (“electricity/retail-sales”) will only provide the data structure, i.e. no meaningful data values will be present (more on this below).</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/eia_data.html">eia_data</a></span><span class="op">(</span><span class="st">"electricity/retail-sales"</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 6 × 5</span></span>
<span><span class="co">#&gt;   period  stateid stateDescription   sectorid sectorName    </span></span>
<span><span class="co">#&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;              &lt;chr&gt;    &lt;chr&gt;         </span></span>
<span><span class="co">#&gt; 1 2008-07 WSC     West South Central IND      industrial    </span></span>
<span><span class="co">#&gt; 2 2008-07 WSC     West South Central OTH      other         </span></span>
<span><span class="co">#&gt; 3 2008-07 WSC     West South Central RES      residential   </span></span>
<span><span class="co">#&gt; 4 2008-07 WSC     West South Central TRA      transportation</span></span>
<span><span class="co">#&gt; 5 2008-07 MTN     Mountain           ALL      all sectors   </span></span>
<span><span class="co">#&gt; 6 2008-07 MTN     Mountain           COM      commercial</span></span></code></pre></div>
<p>Note the console warning that appears. The API can only provide a maximum of 5000 records. If there are more data available than returned, a warning message like above will be provided informing the user of their “incomplete return”.</p>
</div>
<div class="section level3">
<h3 id="data-values">Data values<a class="anchor" aria-label="anchor" href="#data-values"></a>
</h3>
<p>“Data Values” are just the names of the columns that hold the specific, respective data value. For this example, the overall number of power units sold to customers is of main interest, and the associated column name for this information is <code>"sales"</code>.</p>
<p>To get data values, e.g. sales, supply the proper column name id, as provided in the Data Values section of the <code><a href="../reference/eia_metadata.html">eia_metadata()</a></code> console output, again, in this case <code>"sales"</code>.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/eia_data.html">eia_data</a></span><span class="op">(</span><span class="st">"electricity/retail-sales"</span>, data <span class="op">=</span> <span class="st">"sales"</span>, length <span class="op">=</span> <span class="fl">6</span><span class="op">)</span> <span class="co"># length = 6 instead of `|&gt; head()`</span></span>
<span><span class="co">#&gt; # A tibble: 6 × 7</span></span>
<span><span class="co">#&gt;   period  stateid stateDescription   sectorid sectorName        sales `sales-units`        </span></span>
<span><span class="co">#&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;              &lt;chr&gt;    &lt;chr&gt;             &lt;dbl&gt; &lt;chr&gt;                </span></span>
<span><span class="co">#&gt; 1 2008-07 WSC     West South Central IND      industrial     14800.   million kilowatthours</span></span>
<span><span class="co">#&gt; 2 2008-07 WSC     West South Central OTH      other             NA    million kilowatthours</span></span>
<span><span class="co">#&gt; 3 2008-07 WSC     West South Central RES      residential    22406.   million kilowatthours</span></span>
<span><span class="co">#&gt; 4 2008-07 WSC     West South Central TRA      transportation     7.41 million kilowatthours</span></span>
<span><span class="co">#&gt; 5 2008-07 MTN     Mountain           ALL      all sectors    27756.   million kilowatthours</span></span>
<span><span class="co">#&gt; 6 2008-07 MTN     Mountain           COM      commercial      9123.   million kilowatthours</span></span></code></pre></div>
<p>See now that sales data values have been right-column-bound to the data structure as originally provided by <code>eia_data("electricity/retail-sales")</code>.</p>
</div>
</div>
<div class="section level2">
<h2 id="eia-facets">EIA facets<a class="anchor" aria-label="anchor" href="#eia-facets"></a>
</h2>
<div class="section level3">
<h3 id="getting-facet-values">Getting facet values<a class="anchor" aria-label="anchor" href="#getting-facet-values"></a>
</h3>
<p>But what if data is wanted for just one sector, say “residential”? This is where facets arrive, and for any given terminal directory, the facet values can be found with <code><a href="../reference/eia_facets.html">eia_facets()</a></code> by supplying the terminal directory path and facet id, the latter of which can, again, be found from the console output of <code><a href="../reference/eia_metadata.html">eia_metadata()</a></code>.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/eia_facets.html">eia_facets</a></span><span class="op">(</span><span class="st">"electricity/retail-sales"</span>, <span class="st">"sectorid"</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 6 × 3</span></span>
<span><span class="co">#&gt;   id    name           alias               </span></span>
<span><span class="co">#&gt;   &lt;chr&gt; &lt;chr&gt;          &lt;chr&gt;               </span></span>
<span><span class="co">#&gt; 1 RES   residential    (RES) residential   </span></span>
<span><span class="co">#&gt; 2 COM   commercial     (COM) commercial    </span></span>
<span><span class="co">#&gt; 3 ALL   all sectors    (ALL) all sectors   </span></span>
<span><span class="co">#&gt; 4 OTH   other          (OTH) other         </span></span>
<span><span class="co">#&gt; 5 TRA   transportation (TRA) transportation</span></span>
<span><span class="co">#&gt; 6 IND   industrial     (IND) industrial</span></span>
<span><span class="co"># or</span></span>
<span><span class="fu"><a href="../reference/eia_facets.html">eia_facets</a></span><span class="op">(</span><span class="st">"electricity/retail-sales"</span>, <span class="st">"stateid"</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 62 × 3</span></span>
<span><span class="co">#&gt;    id    name               alias                           </span></span>
<span><span class="co">#&gt;    &lt;chr&gt; &lt;chr&gt;              &lt;chr&gt;                           </span></span>
<span><span class="co">#&gt;  1 MA    Massachusetts      (MA) Massachusetts              </span></span>
<span><span class="co">#&gt;  2 VT    Vermont            (VT) Vermont                    </span></span>
<span><span class="co">#&gt;  3 WA    Washington         (WA) Washington                 </span></span>
<span><span class="co">#&gt;  4 HI    Hawaii             (HI) Hawaii                     </span></span>
<span><span class="co">#&gt;  5 WNC   West North Central Region: (WNC) West North Central</span></span>
<span><span class="co">#&gt;  6 NC    North Carolina     (NC) North Carolina             </span></span>
<span><span class="co">#&gt;  7 ENC   East North Central Region: (ENC) East North Central</span></span>
<span><span class="co">#&gt;  8 MTN   Mountain           Region: (MTN) Mountain          </span></span>
<span><span class="co">#&gt;  9 MD    Maryland           (MD) Maryland                   </span></span>
<span><span class="co">#&gt; 10 VA    Virginia           (VA) Virginia                   </span></span>
<span><span class="co">#&gt; # … with 52 more rows</span></span></code></pre></div>
<p>The above output provides the ids for both the State/Region and Sector that will be required for obtaining Retail Sales for Residential customers in Vermont.</p>
<ul>
<li>
<code>"stateid"</code> for Vermont is “VT”</li>
<li>
<code>"sectorid"</code> for residential is “RES”</li>
</ul>
</div>
<div class="section level3">
<h3 id="using-facet-values">Using facet values<a class="anchor" aria-label="anchor" href="#using-facet-values"></a>
</h3>
<p>Now, the ID values from the above output can be used to further limit the returned data with the <code>facets</code> argument in <code><a href="../reference/eia_data.html">eia_data()</a></code>.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/eia_data.html">eia_data</a></span><span class="op">(</span></span>
<span>  dir <span class="op">=</span> <span class="st">"electricity/retail-sales"</span>,</span>
<span>  data <span class="op">=</span> <span class="st">"sales"</span>,</span>
<span>  facets <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>sectorid <span class="op">=</span> <span class="st">"RES"</span>, stateid <span class="op">=</span> <span class="st">"VT"</span><span class="op">)</span>,</span>
<span>  length <span class="op">=</span> <span class="fl">6</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 6 × 7</span></span>
<span><span class="co">#&gt;   period  stateid stateDescription sectorid sectorName  sales `sales-units`        </span></span>
<span><span class="co">#&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;            &lt;chr&gt;    &lt;chr&gt;       &lt;dbl&gt; &lt;chr&gt;                </span></span>
<span><span class="co">#&gt; 1 2008-07 VT      Vermont          RES      residential  188. million kilowatthours</span></span>
<span><span class="co">#&gt; 2 2010-07 VT      Vermont          RES      residential  198. million kilowatthours</span></span>
<span><span class="co">#&gt; 3 2023-08 VT      Vermont          RES      residential  180. million kilowatthours</span></span>
<span><span class="co">#&gt; 4 2016-02 VT      Vermont          RES      residential  185. million kilowatthours</span></span>
<span><span class="co">#&gt; 5 2015-05 VT      Vermont          RES      residential  143. million kilowatthours</span></span>
<span><span class="co">#&gt; 6 2010-06 VT      Vermont          RES      residential  158. million kilowatthours</span></span></code></pre></div>
<p>If multiple data values (sales <em>and</em> price) or facets (residential <em>and</em> commercial) are of interest, simply concatenate these entries with <code><a href="https://rdrr.io/r/base/c.html" class="external-link">c()</a></code>, as shown below:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/eia_data.html">eia_data</a></span><span class="op">(</span></span>
<span>  dir <span class="op">=</span> <span class="st">"electricity/retail-sales"</span>,</span>
<span>  data <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"sales"</span>, <span class="st">"price"</span><span class="op">)</span>,</span>
<span>  facets <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>sectorid <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"RES"</span>, <span class="st">"COM"</span><span class="op">)</span>, stateid <span class="op">=</span> <span class="st">"VT"</span><span class="op">)</span>,</span>
<span>  length <span class="op">=</span> <span class="fl">6</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 6 × 9</span></span>
<span><span class="co">#&gt;   period  stateid stateDescription sectorid sectorName  sales price `sales-units`         `price-units`         </span></span>
<span><span class="co">#&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;            &lt;chr&gt;    &lt;chr&gt;       &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;                 &lt;chr&gt;                 </span></span>
<span><span class="co">#&gt; 1 2008-07 VT      Vermont          COM      commercial   187.  12.5 million kilowatthours cents per kilowatthour</span></span>
<span><span class="co">#&gt; 2 2008-07 VT      Vermont          RES      residential  188.  14.5 million kilowatthours cents per kilowatthour</span></span>
<span><span class="co">#&gt; 3 2010-07 VT      Vermont          COM      commercial   189.  13.3 million kilowatthours cents per kilowatthour</span></span>
<span><span class="co">#&gt; 4 2010-07 VT      Vermont          RES      residential  198.  15.4 million kilowatthours cents per kilowatthour</span></span>
<span><span class="co">#&gt; 5 2023-08 VT      Vermont          COM      commercial   174.  17.3 million kilowatthours cents per kilowatthour</span></span>
<span><span class="co">#&gt; 6 2023-08 VT      Vermont          RES      residential  180.  20.4 million kilowatthours cents per kilowatthour</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="frequency--time-subsetting-and-sorting">Frequency-, time-subsetting, and sorting<a class="anchor" aria-label="anchor" href="#frequency--time-subsetting-and-sorting"></a>
</h2>
<p>This electric retail sales data is available in multiple frequencies and for a defined date range, as shown below:</p>
<pre><code><span><span class="co">#&gt; Frequency:</span></span>
<span><span class="co">#&gt;          id                            description query  format</span></span>
<span><span class="co">#&gt; 1   monthly         One data point for each month.     M YYYY-MM</span></span>
<span><span class="co">#&gt; 2 quarterly         One data point every 3 months.     Q YYYY-QQ</span></span>
<span><span class="co">#&gt; 3    annual One data point for each calendar year.     A    YYYY</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Date Range:</span></span>
<span><span class="co">#&gt;    2001-01 to 2023-08</span></span></code></pre>
<p>The default frequency for this data is monthly, but maybe annualized data for a truncated time frame - say the last five years - is all that is needed. The ability to alter the granularity or truncate time frame of the returned data is provided by the <code>freq</code>, <code>start</code>, and <code>end</code> arguments of <code><a href="../reference/eia_data.html">eia_data()</a></code>.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/eia_data.html">eia_data</a></span><span class="op">(</span></span>
<span>  dir <span class="op">=</span> <span class="st">"electricity/retail-sales"</span>,</span>
<span>  data <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"sales"</span>, <span class="st">"price"</span><span class="op">)</span>,</span>
<span>  facets <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>sectorid <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"RES"</span>, <span class="st">"COM"</span><span class="op">)</span>, stateid <span class="op">=</span> <span class="st">"VT"</span><span class="op">)</span>,</span>
<span>  freq <span class="op">=</span> <span class="st">"annual"</span>,</span>
<span>  start <span class="op">=</span> <span class="st">"2013"</span>,</span>
<span>  end <span class="op">=</span> <span class="st">"2023"</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 20 × 9</span></span>
<span><span class="co">#&gt;    period stateid stateDescription sectorid sectorName  sales price `sales-units`         `price-units`         </span></span>
<span><span class="co">#&gt;     &lt;int&gt; &lt;chr&gt;   &lt;chr&gt;            &lt;chr&gt;    &lt;chr&gt;       &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;                 &lt;chr&gt;                 </span></span>
<span><span class="co">#&gt;  1   2018 VT      Vermont          COM      commercial  2004.  15.2 million kilowatthours cents per kilowatthour</span></span>
<span><span class="co">#&gt;  2   2018 VT      Vermont          RES      residential 2116.  18.0 million kilowatthours cents per kilowatthour</span></span>
<span><span class="co">#&gt;  3   2015 VT      Vermont          COM      commercial  2011.  14.5 million kilowatthours cents per kilowatthour</span></span>
<span><span class="co">#&gt;  4   2015 VT      Vermont          RES      residential 2089.  17.1 million kilowatthours cents per kilowatthour</span></span>
<span><span class="co">#&gt;  5   2014 VT      Vermont          COM      commercial  2031.  14.6 million kilowatthours cents per kilowatthour</span></span>
<span><span class="co">#&gt;  6   2017 VT      Vermont          RES      residential 2023.  17.7 million kilowatthours cents per kilowatthour</span></span>
<span><span class="co">#&gt;  7   2017 VT      Vermont          COM      commercial  1977.  14.6 million kilowatthours cents per kilowatthour</span></span>
<span><span class="co">#&gt;  8   2021 VT      Vermont          COM      commercial  1867.  16.6 million kilowatthours cents per kilowatthour</span></span>
<span><span class="co">#&gt;  9   2021 VT      Vermont          RES      residential 2174.  19.3 million kilowatthours cents per kilowatthour</span></span>
<span><span class="co">#&gt; 10   2022 VT      Vermont          COM      commercial  1916.  17.3 million kilowatthours cents per kilowatthour</span></span>
<span><span class="co">#&gt; 11   2022 VT      Vermont          RES      residential 2187.  19.9 million kilowatthours cents per kilowatthour</span></span>
<span><span class="co">#&gt; 12   2014 VT      Vermont          RES      residential 2121.  17.5 million kilowatthours cents per kilowatthour</span></span>
<span><span class="co">#&gt; 13   2020 VT      Vermont          COM      commercial  1806.  16.4 million kilowatthours cents per kilowatthour</span></span>
<span><span class="co">#&gt; 14   2020 VT      Vermont          RES      residential 2157.  19.5 million kilowatthours cents per kilowatthour</span></span>
<span><span class="co">#&gt; 15   2013 VT      Vermont          RES      residential 2125.  17.1 million kilowatthours cents per kilowatthour</span></span>
<span><span class="co">#&gt; 16   2013 VT      Vermont          COM      commercial  2017.  14.7 million kilowatthours cents per kilowatthour</span></span>
<span><span class="co">#&gt; 17   2019 VT      Vermont          COM      commercial  1934.  16.0 million kilowatthours cents per kilowatthour</span></span>
<span><span class="co">#&gt; 18   2019 VT      Vermont          RES      residential 2082.  17.7 million kilowatthours cents per kilowatthour</span></span>
<span><span class="co">#&gt; 19   2016 VT      Vermont          COM      commercial  2014.  14.5 million kilowatthours cents per kilowatthour</span></span>
<span><span class="co">#&gt; 20   2016 VT      Vermont          RES      residential 2056.  17.4 million kilowatthours cents per kilowatthour</span></span></code></pre></div>
<p>As shown above, the returned data frame has 20 records - 10 annual observations for each sector (residential and commercial). However, notice the hectic ordering of the returned data. Thankfully, the API service can sort this in either ascending or descending order using the <code>sort</code> argument.</p>
<p>Similar to <code>facets</code>, <code>sort</code> requires a named list object with two components:</p>
<ul>
<li>
<code>"cols"</code> - a list of column names on which to sort.</li>
<li>
<code>"order"</code> - a single character value, either “asc” or “desc” for ascending and descending, respectively.</li>
</ul>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/eia_data.html">eia_data</a></span><span class="op">(</span></span>
<span>  dir <span class="op">=</span> <span class="st">"electricity/retail-sales"</span>,</span>
<span>  data <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"sales"</span>, <span class="st">"price"</span><span class="op">)</span>,</span>
<span>  facets <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>sectorid <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"RES"</span>, <span class="st">"COM"</span><span class="op">)</span>, stateid <span class="op">=</span> <span class="st">"VT"</span><span class="op">)</span>,</span>
<span>  freq <span class="op">=</span> <span class="st">"annual"</span>,</span>
<span>  start <span class="op">=</span> <span class="st">"2013"</span>,</span>
<span>  end <span class="op">=</span> <span class="st">"2023"</span>,</span>
<span>  sort <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"period"</span>, <span class="st">"sectorid"</span><span class="op">)</span>, order <span class="op">=</span> <span class="st">"asc"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 20 × 9</span></span>
<span><span class="co">#&gt;    period stateid stateDescription sectorid sectorName  sales price `sales-units`         `price-units`         </span></span>
<span><span class="co">#&gt;     &lt;int&gt; &lt;chr&gt;   &lt;chr&gt;            &lt;chr&gt;    &lt;chr&gt;       &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;                 &lt;chr&gt;                 </span></span>
<span><span class="co">#&gt;  1   2013 VT      Vermont          COM      commercial  2017.  14.7 million kilowatthours cents per kilowatthour</span></span>
<span><span class="co">#&gt;  2   2013 VT      Vermont          RES      residential 2125.  17.1 million kilowatthours cents per kilowatthour</span></span>
<span><span class="co">#&gt;  3   2014 VT      Vermont          COM      commercial  2031.  14.6 million kilowatthours cents per kilowatthour</span></span>
<span><span class="co">#&gt;  4   2014 VT      Vermont          RES      residential 2121.  17.5 million kilowatthours cents per kilowatthour</span></span>
<span><span class="co">#&gt;  5   2015 VT      Vermont          COM      commercial  2011.  14.5 million kilowatthours cents per kilowatthour</span></span>
<span><span class="co">#&gt;  6   2015 VT      Vermont          RES      residential 2089.  17.1 million kilowatthours cents per kilowatthour</span></span>
<span><span class="co">#&gt;  7   2016 VT      Vermont          COM      commercial  2014.  14.5 million kilowatthours cents per kilowatthour</span></span>
<span><span class="co">#&gt;  8   2016 VT      Vermont          RES      residential 2056.  17.4 million kilowatthours cents per kilowatthour</span></span>
<span><span class="co">#&gt;  9   2017 VT      Vermont          COM      commercial  1977.  14.6 million kilowatthours cents per kilowatthour</span></span>
<span><span class="co">#&gt; 10   2017 VT      Vermont          RES      residential 2023.  17.7 million kilowatthours cents per kilowatthour</span></span>
<span><span class="co">#&gt; 11   2018 VT      Vermont          COM      commercial  2004.  15.2 million kilowatthours cents per kilowatthour</span></span>
<span><span class="co">#&gt; 12   2018 VT      Vermont          RES      residential 2116.  18.0 million kilowatthours cents per kilowatthour</span></span>
<span><span class="co">#&gt; 13   2019 VT      Vermont          COM      commercial  1934.  16.0 million kilowatthours cents per kilowatthour</span></span>
<span><span class="co">#&gt; 14   2019 VT      Vermont          RES      residential 2082.  17.7 million kilowatthours cents per kilowatthour</span></span>
<span><span class="co">#&gt; 15   2020 VT      Vermont          COM      commercial  1806.  16.4 million kilowatthours cents per kilowatthour</span></span>
<span><span class="co">#&gt; 16   2020 VT      Vermont          RES      residential 2157.  19.5 million kilowatthours cents per kilowatthour</span></span>
<span><span class="co">#&gt; 17   2021 VT      Vermont          COM      commercial  1867.  16.6 million kilowatthours cents per kilowatthour</span></span>
<span><span class="co">#&gt; 18   2021 VT      Vermont          RES      residential 2174.  19.3 million kilowatthours cents per kilowatthour</span></span>
<span><span class="co">#&gt; 19   2022 VT      Vermont          COM      commercial  1916.  17.3 million kilowatthours cents per kilowatthour</span></span>
<span><span class="co">#&gt; 20   2022 VT      Vermont          RES      residential 2187.  19.9 million kilowatthours cents per kilowatthour</span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><!-- begin footer --><div class="footer">
    <div class="container">
        <div class="row start top-4 bottom-8">
            <div class="col-2"> <img id="footerlogo" src="https://ropensci.org/img/icon_short_white.svg">
</div>
            <div class="col-10">
                <div class="row">
                    <div class="col-md-4 col-xs-6">
                        <a href="https://github.com/ropensci" target="_blank" class="external-link"><div class="icon fab fa-github"></div></a>
                        <a href="https://github.com/ropenscilabs" target="_blank" class="external-link"><div class="icon fa fa-flask"></div></a>
                        <a href="https://hachyderm.io/@ropensci" target="_blank" class="external-link"><div class="icon fab fa-mastodon"></div></a>
                        <a href="https://vimeo.com/ropensci" target="_blank" class="external-link"><div class="icon fab fa-vimeo"></div></a>
                    </div>
                </div>
                <div class="row top-4">
                    <div class="col-md-2 col-sm-4">
                        <ul>
<h5 class="bottom-2">About</h5>
                            <li><a href="https://ropensci.org/about" class="external-link">About rOpenSci</a></li>
                            <li><a href="https://ropensci.org/software-review" class="external-link">Software Review</a></li>
                            <li><a href="https://ropensci.org/about#team" class="external-link">Our Team</a></li>
                            <li><a href="https://ropensci.org/careers" class="external-link">Jobs</a></li>
                            <li><a href="https://ropensci.org/donate" class="external-link">Donate</a></li>
                            <li><a href="https://ropensci.org/contact" class="external-link">Contact Us</a></li>
                        </ul>
</div>
                    <div class="col-md-3 col-sm-4">
                        <ul>
<h5 class="bottom-2">Community</h5>
                            <li><a href="https://ropensci.org/community/" class="external-link">Our Community</a></li>
                            <li><a href="https://ropensci.org/commcalls/" class="external-link">Community calls</a></li>
                            <li><a href="https://ropensci.org/events/" class="external-link">Events</a></li>
                            <li><a href="https://discuss.ropensci.org/" class="external-link">Join the Discussion</a></li>
                            <li><a href="https://ropensci.org/code-of-conduct" class="external-link">Code of conduct</a></li>
                        </ul>
</div>
                    <div class="col-md-2 col-sm-4">
                        <ul>
<h5 class="bottom-2">Resources</h5>
                            <li><a href="https://ropensci.org/packages/" class="external-link">Packages</a></li>
                            <li><a href="https://ropensci.org/usecases/" class="external-link">Use Cases</a></li>
                            <li><a href="https://ropensci.org/talks-papers/" class="external-link">Talks &amp; Publications</a></li>
                            <li><a href="https://docs.ropensci.org/" class="external-link">Documentation</a></li>
                            <li><a href="https://ropensci.org/news/" class="external-link">Newsletter</a></li>
                            <li><a href="https://ropensci.org/how-to-cite-ropensci/" class="external-link">Cite rOpenSci</a></li>
                        </ul>
</div>
                    <div class="col-md-4 col-xs-12">
                        <h5 class="bottom-2"></h5>

                        <p>rOpenSci is a fiscally sponsored project of <a href="http://numfocus.org" class="external-link">NumFOCUS</a>.</p>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- / end footer -->


    </footer>
</div>

  

  

  </body>
</html>
